{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nvar _jsxFileName = \"C:\\\\test\\\\component\\\\public\\\\photo.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport UseDataGet from './useDateGet';\nimport Loading from '../public/loading';\n\nfunction Photo(_ref) {\n  var id = _ref.id;\n\n  var _useState = useState(null),\n      blob = _useState[0],\n      setBlob = _useState[1];\n\n  var _useState2 = useState(null),\n      src = _useState2[0],\n      setSrc = _useState2[1];\n\n  var _useState3 = useState(false),\n      loading = _useState3[0],\n      setLoading = _useState3[1];\n\n  var _useState4 = useState(false),\n      uncount = _useState4[0],\n      setUncount = _useState4[1];\n\n  useEffect(function () {\n    (function _callee() {\n      var request, result;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(fetch(\"http://localhost:3001/getphoto/\".concat(id)));\n\n            case 3:\n              request = _context.sent;\n              _context.next = 6;\n              return _regeneratorRuntime.awrap(request.blob());\n\n            case 6:\n              result = _context.sent;\n\n              if (!uncount) {\n                setBlob(result);\n                setSrc(URL.createObjectURL(result));\n                setLoading(false);\n              }\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    })();\n\n    return function () {\n      setUncount(true);\n      URL.revokeObjectURL(blob);\n    };\n  }, []);\n  return __jsx(\"div\", {\n    className: \"jsx-2681446293\" + \" \" + 'test has',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28\n    },\n    __self: this\n  }, loading ? __jsx(Loading, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  }) : __jsx(\"img\", {\n    src: src,\n    alt: \"\\u7167\\u7247\",\n    className: \"jsx-2681446293\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  }), __jsx(_JSXStyle, {\n    id: \"2681446293\",\n    __self: this\n  }, \"div.jsx-2681446293{height:100%;min-width:100%;}img.jsx-2681446293{height:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-animation:go-jsx-2681446293 .5s;animation:go-jsx-2681446293 .5s;}@-webkit-keyframes go-jsx-2681446293{0%{-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);}100%{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);}}@keyframes go-jsx-2681446293{0%{-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);}100%{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);}}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFx0ZXN0XFxjb21wb25lbnRcXHB1YmxpY1xccGhvdG8uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBaUNrQixBQUdpQyxBQUlELEFBTWUsQUFHQSxZQVpYLEFBSUMsZUFIbkIsMENBU08sQUFHQSw0QkFSWSx3RUFDbEIiLCJmaWxlIjoiQzpcXHRlc3RcXGNvbXBvbmVudFxccHVibGljXFxwaG90by5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCx7dXNlRWZmZWN0LHVzZVN0YXRlfSBmcm9tICdyZWFjdCdcclxuaW1wb3J0IFVzZURhdGFHZXQgZnJvbSAnLi91c2VEYXRlR2V0J1xyXG5pbXBvcnQgTG9hZGluZyBmcm9tICcuLi9wdWJsaWMvbG9hZGluZydcclxuXHJcbmZ1bmN0aW9uIFBob3RvKHtpZH0pIHtcclxuICAgIGNvbnN0IFtibG9iLHNldEJsb2JdID0gdXNlU3RhdGUobnVsbCk7XHJcbiAgICBjb25zdCBbc3JjLHNldFNyY10gPSB1c2VTdGF0ZShudWxsKTtcclxuICAgIGNvbnN0IFtsb2FkaW5nLHNldExvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gICAgY29uc3QgW3VuY291bnQsc2V0VW5jb3VudF0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgICBcclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgICAoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICBzZXRMb2FkaW5nKHRydWUpO1xyXG4gICAgICAgICAgICAgICBsZXQgcmVxdWVzdCA9IGF3YWl0IGZldGNoKGBodHRwOi8vbG9jYWxob3N0OjMwMDEvZ2V0cGhvdG8vJHtpZH1gKVxyXG4gICAgICAgICAgICAgICBsZXQgcmVzdWx0ID1hd2FpdCByZXF1ZXN0LmJsb2IoKTtcclxuICAgICAgICAgICAgICAgaWYoIXVuY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgIHNldEJsb2IocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgIHNldFNyYyhVUkwuY3JlYXRlT2JqZWN0VVJMKHJlc3VsdCkpOyAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pKClcclxuICAgICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgc2V0VW5jb3VudCh0cnVlKTtcclxuICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGJsb2IpO1xyXG4gICAgICAgICAgfVxyXG4gICAgfSxbXSlcclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Rlc3QgaGFzJz4gICAgICAgICAgXHJcbiAgICAgICAgICAgICB7LyogeyBibG9iICYmICA8aW1nIHNyYz17VVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKX0gYWx0PVwi54Wn54mHXCIvPn0gICAgICAgICAgICovfVxyXG4gICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgIGxvYWRpbmcgPyA8TG9hZGluZy8+IDogPGltZyBzcmM9e3NyY30gYWx0PVwi54Wn54mHXCIvPlxyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgPHN0eWxlIGpzeD5cclxuICAgICAgICAgICAgICAgICB7YFxyXG4gICAgICAgICAgICAgICAgIGRpdiB7XHJcbiAgICAgICAgICAgICAgICAgICAgIGhlaWdodDoxMDAlO1xyXG4gICAgICAgICAgICAgICAgICAgICBtaW4td2lkdGg6MTAwJTtcclxuICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIGltZyB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OjEwMCU7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlci1zZWxlY3Q6bm9uZTtcclxuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb246Z28gLjVzO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIEBrZXlmcmFtZXMgZ28ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAwJSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06c2NhbGUoMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgMTAwJSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06c2NhbGUoMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgYH1cclxuICAgICAgICAgICAgIDwvc3R5bGU+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICApXHJcbiAgICBcclxuICAgIFxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQaG90b1xyXG4iXX0= */\\n/*@ sourceURL=C:\\\\\\\\test\\\\\\\\component\\\\\\\\public\\\\\\\\photo.js */\"));\n}\n\nexport default Photo;","map":{"version":3,"sources":["C:/test/component/public/photo.js"],"names":["React","useEffect","useState","UseDataGet","Loading","Photo","id","blob","setBlob","src","setSrc","loading","setLoading","uncount","setUncount","fetch","request","result","URL","createObjectURL","revokeObjectURL"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAcC,SAAd,EAAwBC,QAAxB,QAAuC,OAAvC;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,OAAP,MAAoB,mBAApB;;AAEA,SAASC,KAAT,OAAqB;AAAA,MAALC,EAAK,QAALA,EAAK;;AAAA,kBACMJ,QAAQ,CAAC,IAAD,CADd;AAAA,MACVK,IADU;AAAA,MACLC,OADK;;AAAA,mBAEIN,QAAQ,CAAC,IAAD,CAFZ;AAAA,MAEVO,GAFU;AAAA,MAENC,MAFM;;AAAA,mBAGYR,QAAQ,CAAC,KAAD,CAHpB;AAAA,MAGVS,OAHU;AAAA,MAGFC,UAHE;;AAAA,mBAIYV,QAAQ,CAAC,KAAD,CAJpB;AAAA,MAIVW,OAJU;AAAA,MAIFC,UAJE;;AAMjBb,EAAAA,SAAS,CAAC,YAAM;AACV,KAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AACIW,cAAAA,UAAU,CAAC,IAAD,CAAV;AADJ;AAAA,+CAEwBG,KAAK,0CAAmCT,EAAnC,EAF7B;;AAAA;AAEQU,cAAAA,OAFR;AAAA;AAAA,+CAGsBA,OAAO,CAACT,IAAR,EAHtB;;AAAA;AAGQU,cAAAA,MAHR;;AAII,kBAAG,CAACJ,OAAJ,EAAa;AACTL,gBAAAA,OAAO,CAACS,MAAD,CAAP;AACAP,gBAAAA,MAAM,CAACQ,GAAG,CAACC,eAAJ,CAAoBF,MAApB,CAAD,CAAN;AACAL,gBAAAA,UAAU,CAAC,KAAD,CAAV;AACH;;AARL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;;AAUA,WAAO,YAAM;AACTE,MAAAA,UAAU,CAAC,IAAD,CAAV;AACAI,MAAAA,GAAG,CAACE,eAAJ,CAAoBb,IAApB;AACH,KAHD;AAIL,GAfQ,EAeP,EAfO,CAAT;AAgBA,SACI;AAAA,wCAAe,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAGSI,OAAO,GAAG,MAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAH,GAAgB;AAAK,IAAA,GAAG,EAAEF,GAAV;AAAe,IAAA,GAAG,EAAC,cAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHhC;AAAA;AAAA;AAAA,0oHADJ;AA+BH;;AAED,eAAeJ,KAAf","sourcesContent":["import React,{useEffect,useState} from 'react'\r\nimport UseDataGet from './useDateGet'\r\nimport Loading from '../public/loading'\r\n\r\nfunction Photo({id}) {\r\n    const [blob,setBlob] = useState(null);\r\n    const [src,setSrc] = useState(null);\r\n    const [loading,setLoading] = useState(false);\r\n    const [uncount,setUncount] = useState(false);\r\n    \r\n    useEffect(() => {\r\n          (async () => {\r\n               setLoading(true);\r\n               let request = await fetch(`http://localhost:3001/getphoto/${id}`)\r\n               let result =await request.blob();\r\n               if(!uncount) {\r\n                   setBlob(result);\r\n                   setSrc(URL.createObjectURL(result));               \r\n                   setLoading(false);\r\n               }\r\n          })()\r\n          return () => {\r\n              setUncount(true);\r\n              URL.revokeObjectURL(blob);\r\n          }\r\n    },[])\r\n    return (\r\n        <div className='test has'>          \r\n             {/* { blob &&  <img src={URL.createObjectURL(blob)} alt=\"照片\"/>}           */}\r\n             {\r\n                 loading ? <Loading/> : <img src={src} alt=\"照片\"/>\r\n             }\r\n             <style jsx>\r\n                 {`\r\n                 div {\r\n                     height:100%;\r\n                     min-width:100%;\r\n                 }\r\n                  img {\r\n                    height:100%;\r\n                    user-select:none;\r\n                    animation:go .5s;\r\n                  }\r\n                  @keyframes go {\r\n                        0% {\r\n                            transform:scale(0);\r\n                        }                        \r\n                        100% {\r\n                            transform:scale(1);\r\n                        }\r\n                    }\r\n                 `}\r\n             </style>\r\n        </div>\r\n    )\r\n    \r\n    \r\n}\r\n\r\nexport default Photo\r\n"]},"metadata":{},"sourceType":"module"}