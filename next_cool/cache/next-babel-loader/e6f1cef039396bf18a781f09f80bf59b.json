{"ast":null,"code":"var _jsxFileName = \"C:\\\\test\\\\pages\\\\public\\\\photo.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport UseDataGet from './useDateGet';\nimport Loading from '../public/loading';\n\nfunction Photo({\n  id\n}) {\n  const {\n    0: blob,\n    1: setBlob\n  } = useState(null);\n  const {\n    0: src,\n    1: setSrc\n  } = useState(null);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: uncount,\n    1: setUncount\n  } = useState(false);\n  useEffect(() => {\n    (async () => {\n      setLoading(true);\n      let request = await fetch(`http://localhost:3001/getphoto/${id}`);\n      let result = await request.blob();\n\n      if (!uncount) {\n        setBlob(result);\n        setSrc(URL.createObjectURL(result));\n        setLoading(false);\n      }\n    })();\n\n    return () => {\n      setUncount(true);\n      URL.revokeObjectURL(blob);\n    };\n  }, []);\n  return __jsx(\"div\", {\n    className: \"jsx-2681446293\" + \" \" + 'test has',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28\n    },\n    __self: this\n  }, loading ? __jsx(Loading, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  }) : __jsx(\"img\", {\n    src: src,\n    alt: \"\\u7167\\u7247\",\n    className: \"jsx-2681446293\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  }), __jsx(_JSXStyle, {\n    id: \"2681446293\",\n    __self: this\n  }, \"div.jsx-2681446293{height:100%;min-width:100%;}img.jsx-2681446293{height:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-animation:go-jsx-2681446293 .5s;animation:go-jsx-2681446293 .5s;}@-webkit-keyframes go-jsx-2681446293{0%{-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);}100%{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);}}@keyframes go-jsx-2681446293{0%{-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);}100%{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);}}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFx0ZXN0XFxwYWdlc1xccHVibGljXFxwaG90by5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFpQ2tCLEFBR2lDLEFBSUQsQUFNZSxBQUdBLFlBWlgsQUFJQyxlQUhuQiwwQ0FTTyxBQUdBLDRCQVJZLHdFQUNsQiIsImZpbGUiOiJDOlxcdGVzdFxccGFnZXNcXHB1YmxpY1xccGhvdG8uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3Qse3VzZUVmZmVjdCx1c2VTdGF0ZX0gZnJvbSAncmVhY3QnXHJcbmltcG9ydCBVc2VEYXRhR2V0IGZyb20gJy4vdXNlRGF0ZUdldCdcclxuaW1wb3J0IExvYWRpbmcgZnJvbSAnLi4vcHVibGljL2xvYWRpbmcnXHJcblxyXG5mdW5jdGlvbiBQaG90byh7aWR9KSB7XHJcbiAgICBjb25zdCBbYmxvYixzZXRCbG9iXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4gICAgY29uc3QgW3NyYyxzZXRTcmNdID0gdXNlU3RhdGUobnVsbCk7XHJcbiAgICBjb25zdCBbbG9hZGluZyxzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICAgIGNvbnN0IFt1bmNvdW50LHNldFVuY291bnRdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gICAgXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgICAgKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgc2V0TG9hZGluZyh0cnVlKTtcclxuICAgICAgICAgICAgICAgbGV0IHJlcXVlc3QgPSBhd2FpdCBmZXRjaChgaHR0cDovL2xvY2FsaG9zdDozMDAxL2dldHBob3RvLyR7aWR9YClcclxuICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9YXdhaXQgcmVxdWVzdC5ibG9iKCk7XHJcbiAgICAgICAgICAgICAgIGlmKCF1bmNvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICBzZXRCbG9iKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICBzZXRTcmMoVVJMLmNyZWF0ZU9iamVjdFVSTChyZXN1bHQpKTsgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KSgpXHJcbiAgICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICAgIHNldFVuY291bnQodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChibG9iKTtcclxuICAgICAgICAgIH1cclxuICAgIH0sW10pXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXN0IGhhcyc+ICAgICAgICAgIFxyXG4gICAgICAgICAgICAgey8qIHsgYmxvYiAmJiAgPGltZyBzcmM9e1VSTC5jcmVhdGVPYmplY3RVUkwoYmxvYil9IGFsdD1cIueFp+eJh1wiLz59ICAgICAgICAgICAqL31cclxuICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICBsb2FkaW5nID8gPExvYWRpbmcvPiA6IDxpbWcgc3JjPXtzcmN9IGFsdD1cIueFp+eJh1wiLz5cclxuICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgIDxzdHlsZSBqc3g+XHJcbiAgICAgICAgICAgICAgICAge2BcclxuICAgICAgICAgICAgICAgICBkaXYge1xyXG4gICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MTAwJTtcclxuICAgICAgICAgICAgICAgICAgICAgbWluLXdpZHRoOjEwMCU7XHJcbiAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICBpbWcge1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDoxMDAlO1xyXG4gICAgICAgICAgICAgICAgICAgIHVzZXItc2VsZWN0Om5vbmU7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uOmdvIC41cztcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICBAa2V5ZnJhbWVzIGdvIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgMCUge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOnNjYWxlKDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDEwMCUge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOnNjYWxlKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgIGB9XHJcbiAgICAgICAgICAgICA8L3N0eWxlPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG4gICAgXHJcbiAgICBcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUGhvdG9cclxuIl19 */\\n/*@ sourceURL=C:\\\\\\\\test\\\\\\\\pages\\\\\\\\public\\\\\\\\photo.js */\"));\n}\n\nexport default Photo;","map":{"version":3,"sources":["C:/test/pages/public/photo.js"],"names":["React","useEffect","useState","UseDataGet","Loading","Photo","id","blob","setBlob","src","setSrc","loading","setLoading","uncount","setUncount","request","fetch","result","URL","createObjectURL","revokeObjectURL"],"mappings":";;;AAAA,OAAOA,KAAP,IAAcC,SAAd,EAAwBC,QAAxB,QAAuC,OAAvC;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,OAAP,MAAoB,mBAApB;;AAEA,SAASC,KAAT,CAAe;AAACC,EAAAA;AAAD,CAAf,EAAqB;AACjB,QAAM;AAAA,OAACC,IAAD;AAAA,OAAMC;AAAN,MAAiBN,QAAQ,CAAC,IAAD,CAA/B;AACA,QAAM;AAAA,OAACO,GAAD;AAAA,OAAKC;AAAL,MAAeR,QAAQ,CAAC,IAAD,CAA7B;AACA,QAAM;AAAA,OAACS,OAAD;AAAA,OAASC;AAAT,MAAuBV,QAAQ,CAAC,KAAD,CAArC;AACA,QAAM;AAAA,OAACW,OAAD;AAAA,OAASC;AAAT,MAAuBZ,QAAQ,CAAC,KAAD,CAArC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACV,KAAC,YAAY;AACRW,MAAAA,UAAU,CAAC,IAAD,CAAV;AACA,UAAIG,OAAO,GAAG,MAAMC,KAAK,CAAE,kCAAiCV,EAAG,EAAtC,CAAzB;AACA,UAAIW,MAAM,GAAE,MAAMF,OAAO,CAACR,IAAR,EAAlB;;AACA,UAAG,CAACM,OAAJ,EAAa;AACTL,QAAAA,OAAO,CAACS,MAAD,CAAP;AACAP,QAAAA,MAAM,CAACQ,GAAG,CAACC,eAAJ,CAAoBF,MAApB,CAAD,CAAN;AACAL,QAAAA,UAAU,CAAC,KAAD,CAAV;AACH;AACL,KATD;;AAUA,WAAO,MAAM;AACTE,MAAAA,UAAU,CAAC,IAAD,CAAV;AACAI,MAAAA,GAAG,CAACE,eAAJ,CAAoBb,IAApB;AACH,KAHD;AAIL,GAfQ,EAeP,EAfO,CAAT;AAgBA,SACI;AAAA,wCAAe,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAGSI,OAAO,GAAG,MAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAH,GAAgB;AAAK,IAAA,GAAG,EAAEF,GAAV;AAAe,IAAA,GAAG,EAAC,cAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHhC;AAAA;AAAA;AAAA,0nHADJ;AA+BH;;AAED,eAAeJ,KAAf","sourcesContent":["import React,{useEffect,useState} from 'react'\r\nimport UseDataGet from './useDateGet'\r\nimport Loading from '../public/loading'\r\n\r\nfunction Photo({id}) {\r\n    const [blob,setBlob] = useState(null);\r\n    const [src,setSrc] = useState(null);\r\n    const [loading,setLoading] = useState(false);\r\n    const [uncount,setUncount] = useState(false);\r\n    \r\n    useEffect(() => {\r\n          (async () => {\r\n               setLoading(true);\r\n               let request = await fetch(`http://localhost:3001/getphoto/${id}`)\r\n               let result =await request.blob();\r\n               if(!uncount) {\r\n                   setBlob(result);\r\n                   setSrc(URL.createObjectURL(result));               \r\n                   setLoading(false);\r\n               }\r\n          })()\r\n          return () => {\r\n              setUncount(true);\r\n              URL.revokeObjectURL(blob);\r\n          }\r\n    },[])\r\n    return (\r\n        <div className='test has'>          \r\n             {/* { blob &&  <img src={URL.createObjectURL(blob)} alt=\"照片\"/>}           */}\r\n             {\r\n                 loading ? <Loading/> : <img src={src} alt=\"照片\"/>\r\n             }\r\n             <style jsx>\r\n                 {`\r\n                 div {\r\n                     height:100%;\r\n                     min-width:100%;\r\n                 }\r\n                  img {\r\n                    height:100%;\r\n                    user-select:none;\r\n                    animation:go .5s;\r\n                  }\r\n                  @keyframes go {\r\n                        0% {\r\n                            transform:scale(0);\r\n                        }                        \r\n                        100% {\r\n                            transform:scale(1);\r\n                        }\r\n                    }\r\n                 `}\r\n             </style>\r\n        </div>\r\n    )\r\n    \r\n    \r\n}\r\n\r\nexport default Photo\r\n"]},"metadata":{},"sourceType":"module"}