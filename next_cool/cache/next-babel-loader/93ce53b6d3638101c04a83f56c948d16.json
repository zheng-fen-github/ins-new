{"ast":null,"code":"import _Array$from from \"@babel/runtime-corejs2/core-js/array/from\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React from 'react';\n\nfunction Form(_ref) {\n  var errorEv = _ref.errorEv;\n\n  var submit = function submit(e) {\n    e.preventDefault();\n    var form = e.currentTarget;\n    fetch('http://localhost:3001/login/registered', {\n      method: 'POST',\n      body: new FormData(e.currentTarget) //自动格式选择 form格式\n\n    }).then(function (res) {\n      if (res.ok) {\n        return res.json();\n      } else {\n        res.json().then(function (error) {\n          //请求错误处理\n          console.log(error);\n\n          if (error.includes('account')) {\n            form.account.closest('.account').classList.add('error');\n            errorEv(error);\n          }\n\n          if (error.includes('email')) {\n            form.email.closest('.email').classList.add('error');\n            errorEv(error);\n          }\n        });\n      }\n    }).then(function (result) {\n      //请求成功处理\n      if (result) {\n        try {\n          _Array$from(form.querySelectorAll('.error')).forEach(function (item) {\n            return item.classList.remove('error');\n          });\n\n          errorEv('');\n          setTimeout(function () {\n            return errorEv('ok');\n          }, 0);\n        } catch (err) {\n          console.log(err);\n        }\n      }\n    });\n  };\n\n  return __jsx(\"form\", {\n    onSubmit: submit,\n    className: \"jsx-3531505121\"\n  }, __jsx(\"div\", {\n    className: \"jsx-3531505121\" + \" \" + \"account\"\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"account\",\n    id: \"account\",\n    placeholder: \"account\",\n    required: true,\n    className: \"jsx-3531505121\"\n  })), __jsx(\"div\", {\n    className: \"jsx-3531505121\" + \" \" + \"email\"\n  }, __jsx(\"input\", {\n    type: \"email\",\n    name: \"email\",\n    id: \"email\",\n    placeholder: \"email\",\n    required: true,\n    className: \"jsx-3531505121\"\n  })), __jsx(\"div\", {\n    className: \"jsx-3531505121\" + \" \" + \"password\"\n  }, __jsx(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    id: \"password\",\n    placeholder: \"password\",\n    required: true,\n    className: \"jsx-3531505121\"\n  })), __jsx(\"div\", {\n    className: \"jsx-3531505121\" + \" \" + \"submit\"\n  }, __jsx(\"input\", {\n    type: \"submit\",\n    value: \"Continue\",\n    className: \"jsx-3531505121\"\n  })), __jsx(_JSXStyle, {\n    id: \"3531505121\"\n  }, [\"form.jsx-3531505121{width:80%;background:white;margin:0 auto;margin-top:8vh;padding:4vh 0;border-radius:12px;box-shadow:0 0 2px #eee;}\", \"form.jsx-3531505121>div.jsx-3531505121{width:80%;margin:0 auto;margin-bottom:4vh;border-radius:12px;}\", \"form.jsx-3531505121 .submit.jsx-3531505121{margin-bottom:0;}\", \"form.jsx-3531505121 input.jsx-3531505121{width:100%;height:6vh;font-size:3vh;border:solid #eee 2px;border-radius:12px;box-shadow:0 0 4px #eee;box-sizing:border-box;padding:2vh;outline:none;-webkit-animation:load-jsx-3531505121 1s;animation:load-jsx-3531505121 1s;}\", \"form.jsx-3531505121 input[type='submit'].jsx-3531505121{color:white;background:#5c52ff;padding:0;border:none;}\", \".error.jsx-3531505121{box-shadow:0 0px 4px red;}\", \"form.jsx-3531505121 input[type='submit'].jsx-3531505121:hover{box-shadow:0 0 8px #888;}\", \"form.jsx-3531505121 input[type='submit'].jsx-3531505121:active{box-shadow:0 0 0;}\", \"@-webkit-keyframes load-jsx-3531505121{0%{opacity:0;-webkit-transform:translate(100px,0);-ms-transform:translate(100px,0);transform:translate(100px,0);}100%{opacity:1;-webkit-transform:translate(0,0);-ms-transform:translate(0,0);transform:translate(0,0);}}\", \"@keyframes load-jsx-3531505121{0%{opacity:0;-webkit-transform:translate(100px,0);-ms-transform:translate(100px,0);transform:translate(100px,0);}100%{opacity:1;-webkit-transform:translate(0,0);-ms-transform:translate(0,0);transform:translate(0,0);}}\"]));\n}\n\nexport default Form;","map":null,"metadata":{},"sourceType":"module"}