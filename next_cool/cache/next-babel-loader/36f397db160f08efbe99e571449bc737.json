{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport Input from './input.js';\n\nfunction Form({\n  Ev\n}) {\n  const {\n    0: accountOk,\n    1: setAccountOk\n  } = useState(false); // 账号检测状态\n\n  let buttonRef; // 按钮Ref定义\n\n  let animaRef; // 动画Ref\n\n  let accountRef = React.createRef();\n  let passwordRef = React.createRef();\n\n  const trans = () => {\n    //dong画事件     \n    animaRef.classList.toggle('go');\n  }; //提交事件     \n\n\n  const submitevent = e => {\n    e.preventDefault();\n    let animaRef = buttonRef.previousElementSibling;\n    animaRef.classList.add('require');\n    animaRef.classList.toggle('left');\n    animaRef.addEventListener('transitionend', e => {\n      e.target.classList.toggle('left');\n    });\n    let formdata = new FormData(e.target);\n    fetch('http://localhost:3001/login', {\n      method: 'POST',\n      body: formdata\n    }).then(res => res.json()).then(result => alert(result));\n  }; //账号验证事件\n\n\n  const ACCright = e => {\n    if (!accountOk) {\n      e.preventDefault();\n    }\n\n    animaRef.classList.add('require');\n    animaRef.classList.add('go');\n    animaRef.addEventListener('transitionend', trans);\n    let account = accountRef.current.children[1].value;\n    fetch(`http://localhost:3001/login/${account}`, {\n      method: 'GET'\n    }).then(res => {\n      try {\n        if (res.ok) {\n          anima();\n          setAccountOk(true);\n        } else {\n          setTimeout(() => {\n            animaRef.removeEventListener('transitionend', trans);\n            animaRef.classList.toggle('go');\n          }, 1000);\n        }\n      } catch (err) {\n        console.log(err);\n      }\n    });\n\n    const anima = () => {\n      animaRef.removeEventListener('transitionend', trans);\n      accountRef.current.style.opacity = 0;\n      passwordRef.current.style.opacity = 1;\n      passwordRef.current.style.visibility = true;\n      animaRef.classList.remove('require');\n      animaRef.classList.remove('go');\n      buttonRef.classList.remove('buttonstatus');\n    };\n  }; //动画事件 线条渐变效果\n\n\n  const LineColor = select => {\n    if (select < 1) {\n      animaRef.classList.remove('require');\n    } else {\n      animaRef.classList.add('require');\n    }\n  }; //动画事件 线条渐变效果\n\n\n  const buttonColor = select => {\n    if (select < 1) {\n      buttonRef.classList.remove('buttonstatus');\n    } else {\n      buttonRef.classList.add('buttonstatus');\n    }\n  };\n\n  return __jsx(\"div\", {\n    id: \"accform\",\n    className: \"jsx-3028285870\"\n  }, __jsx(\"form\", {\n    onSubmit: submitevent,\n    className: \"jsx-3028285870\"\n  }, __jsx(\"div\", {\n    className: \"jsx-3028285870\" + \" \" + \"div\"\n  }, __jsx(Input, {\n    event: LineColor,\n    buevent: buttonColor,\n    type: \"account\",\n    ref: accountRef\n  }), __jsx(Input, {\n    event: LineColor,\n    buevent: buttonColor,\n    type: \"password\",\n    ref: passwordRef\n  })), __jsx(\"div\", {\n    ref: ref => animaRef = ref,\n    className: \"jsx-3028285870\" + \" \" + 'anima'\n  }), __jsx(\"button\", {\n    ref: ref => buttonRef = ref,\n    onClick: ACCright,\n    className: \"jsx-3028285870\"\n  }, \"continue\")), __jsx(_JSXStyle, {\n    id: \"3028285870\"\n  }, [\"#accform.jsx-3028285870{width:30%;margin:0 auto;margin-top:10vh;position:relative;-webkit-transition:display 1s;transition:display 1s;}\", \"#accform.jsx-3028285870 .div.jsx-3028285870{min-height:5vh;}\", \"#accform.jsx-3028285870 form.jsx-3028285870{position:relative;}\", \"#accform.jsx-3028285870 button.jsx-3028285870{margin-top:3vh;width:100%;height:6vh;border-radius:6px;font-size:3vh;color:#5c52ff;background:#eee;display:block;opacity:0.2;border:none;-webkit-transition:all 0.4s;transition:all 0.4s;}\", \"#accform.jsx-3028285870 .buttonstatus.jsx-3028285870{background:#5c52ff;color:white;opacity:1;-webkit-transition:all 0.4s;transition:all 0.4s;}\", \"#accform.jsx-3028285870 .require.jsx-3028285870{-webkit-animation:account-jsx-3028285870 1.5s infinite;animation:account-jsx-3028285870 1.5s infinite;}\", \"#accform.jsx-3028285870 div.anima.jsx-3028285870{width:100%;height:2px;background:white;-webkit-transition:-webkit-transform 1s;-webkit-transition:transform 1s;transition:transform 1s;-webkit-transform:scale(1,1);-ms-transform:scale(1,1);transform:scale(1,1);-webkit-transform-origin:right 50%;-ms-transform-origin:right 50%;transform-origin:right 50%;}\", \"#accform.jsx-3028285870 div.go.jsx-3028285870{height:2px;-webkit-transform:scale(0,1);-ms-transform:scale(0,1);transform:scale(0,1);-webkit-transform-origin:left 50%;-ms-transform-origin:left 50%;transform-origin:left 50%;-webkit-transition:-webkit-transform 0.5s;-webkit-transition:transform 0.5s;transition:transform 0.5s;}\", \"@-webkit-keyframes account-jsx-3028285870{0%{background:#5c52ff;}50%{background:#001c50;}100%{background:#5c52ff;}}\", \"@keyframes account-jsx-3028285870{0%{background:#5c52ff;}50%{background:#001c50;}100%{background:#5c52ff;}}\"]));\n}\n\nexport default Form;","map":null,"metadata":{},"sourceType":"module"}