{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport Head from 'next/head';\nimport Sidebar from '../component/home/sidebar/sidebar';\nimport Main from '../component/home/main/store.js';\nimport Chat2 from '../component/home/newchat/index';\nimport Router from 'next/router';\nimport { Context } from '../component/editusermessage/context/ins-context';\nimport Login from '../component/home/sidebar/login';\nimport Root from '../component/home/sidebar/root';\n\nfunction Home() {\n  const {\n    0: cookie,\n    1: setCookie\n  } = useState(null);\n  const {\n    0: fetching,\n    1: setFetching\n  } = useState(true);\n  useEffect(() => {\n    //获取账号信息 user 信息 利用cookie 检测。\n    (async () => {\n      try {\n        let request = await fetch('http://localhost:3001/login', {\n          credentials: \"include\"\n        });\n\n        if (request.status === 404) {\n          console.log('???');\n          setCookie(false);\n        } else {\n          let result = await request.json();\n          setCookie(() => [result]);\n        }\n\n        setFetching(false);\n      } catch (err) {\n        if (err) {\n          console.log(err);\n        }\n      }\n    })();\n  }, []);\n  return __jsx(React.Fragment, null, __jsx(Head, null, __jsx(\"title\", null, \"My APP \"), __jsx(\"meta\", {\n    name: \"viewport\",\n    content: \"initial-scale=1.0, width=device-width\"\n  }), __jsx(\"link\", {\n    rel: \"stylesheet\",\n    href: \"//at.alicdn.com/t/font_1492911_y0mmz58d06.css\"\n  })), __jsx(\"div\", {\n    id: \"home\",\n    className: \"jsx-1909480225\" + \" \" + 'home'\n  }, __jsx(Context.Provider, {\n    value: cookie\n  }, fetching ? __jsx(Root, null) : !cookie ? __jsx(Login, null) : __jsx(Sidebar, {\n    postData: cookie[0]\n  })), __jsx(Main, {\n    message: cookie ? cookie[0] : null\n  }), __jsx(Chat2, null), __jsx(_JSXStyle, {\n    id: \"3762891050\"\n  }, [\"*{margin:0;padding:0;box-sizing:border-box;}\"]), __jsx(_JSXStyle, {\n    id: \"4065855138\"\n  }, [\".home.jsx-1909480225{width:100vw;height:100vh;min-height:600px;overflow:hidden;z-index:-3;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;background:#eeeef4;}\"])));\n}\n\nexport default Home;","map":null,"metadata":{},"sourceType":"module"}