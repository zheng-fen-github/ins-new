{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport Head from 'next/head';\nimport Sidebar from '../component/home/sidebar/sidebar';\nimport Main from '../component/home/main/store.js';\nimport Chat2 from '../component/home/newchat/index';\nimport Router from 'next/router';\nimport { Context } from '../component/editusermessage/context/ins-context';\nimport Login from '../component/home/sidebar/login';\nimport Root from '../component/home/sidebar/root';\n\nfunction Home() {\n  var _useState = useState(null),\n      cookie = _useState[0],\n      setCookie = _useState[1];\n\n  var _useState2 = useState(true),\n      fetching = _useState2[0],\n      setFetching = _useState2[1];\n\n  useEffect(function () {\n    //获取账号信息 user 信息 利用cookie 检测。\n    (function _callee() {\n      var request, result;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(fetch('http://localhost:3001/login', {\n                credentials: \"include\"\n              }));\n\n            case 3:\n              request = _context.sent;\n\n              if (!(request.status === 404)) {\n                _context.next = 9;\n                break;\n              }\n\n              console.log('???');\n              setCookie(false);\n              _context.next = 13;\n              break;\n\n            case 9:\n              _context.next = 11;\n              return _regeneratorRuntime.awrap(request.json());\n\n            case 11:\n              result = _context.sent;\n              setCookie(function () {\n                return [result];\n              });\n\n            case 13:\n              setFetching(false);\n              _context.next = 19;\n              break;\n\n            case 16:\n              _context.prev = 16;\n              _context.t0 = _context[\"catch\"](0);\n\n              if (_context.t0) {\n                console.log(_context.t0);\n              }\n\n            case 19:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 16]], Promise);\n    })();\n  }, []);\n  return __jsx(React.Fragment, null, __jsx(Head, null, __jsx(\"title\", null, \"My APP \"), __jsx(\"meta\", {\n    name: \"viewport\",\n    content: \"initial-scale=1.0, width=device-width\"\n  }), __jsx(\"link\", {\n    rel: \"stylesheet\",\n    href: \"//at.alicdn.com/t/font_1492911_y0mmz58d06.css\"\n  })), __jsx(\"div\", {\n    id: \"home\",\n    className: \"jsx-1909480225\" + \" \" + 'home'\n  }, __jsx(Context.Provider, {\n    value: cookie\n  }, fetching ? __jsx(Root, null) : !cookie ? __jsx(Login, null) : __jsx(Sidebar, {\n    postData: cookie[0]\n  })), __jsx(Main, {\n    message: cookie ? cookie[0] : null\n  }), __jsx(Chat2, null), __jsx(_JSXStyle, {\n    id: \"3762891050\"\n  }, [\"*{margin:0;padding:0;box-sizing:border-box;}\"]), __jsx(_JSXStyle, {\n    id: \"4065855138\"\n  }, [\".home.jsx-1909480225{width:100vw;height:100vh;min-height:600px;overflow:hidden;z-index:-3;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;background:#eeeef4;}\"])));\n}\n\nexport default Home;","map":null,"metadata":{},"sourceType":"module"}